<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta http-equiv="Content-Style-Type" content="text/css" />
		<meta name="generator" content="MediaWiki 1.14.0" />
		<meta name="keywords" content="Chapter 4,De:Chapter 4,En:Chapter 4,Chapter 4,Es:Chapter 4,Fr:Chapter 4,Ja:Chapter 4,Tr:Chapter 4,Wiki Translation,MySQL" />
		<link rel="alternate" type="application/x-wiki" title="Edit" href="http://wiki.sphere.torfo.org/index.php?title=Chapter_4&amp;action=edit" />
		<link rel="edit" title="Edit" href="http://wiki.sphere.torfo.org/index.php?title=Chapter_4&amp;action=edit" />
		<link rel="shortcut icon" href="/favicon.ico" />
		<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="SphereWiki (en)" />
		<link rel="alternate" type="application/rss+xml" title="SphereWiki RSS Feed" href="http://wiki.sphere.torfo.org/index.php?title=Special:RecentChanges&amp;feed=rss" />
		<link rel="alternate" type="application/atom+xml" title="SphereWiki Atom Feed" href="http://wiki.sphere.torfo.org/index.php?title=Special:RecentChanges&amp;feed=atom" />
		<title>Chapter 4 - SphereWiki</title>
		<link rel="stylesheet" href="/skins/common/shared.css?195" type="text/css" media="screen" />
		<link rel="stylesheet" href="/skins/common/commonPrint.css?195" type="text/css" media="print" />
		<link rel="stylesheet" href="/skins/monobook/main.css?195" type="text/css" media="screen" />
		<!--[if lt IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE50Fixes.css?195" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 5.5000]><link rel="stylesheet" href="/skins/monobook/IE55Fixes.css?195" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 6]><link rel="stylesheet" href="/skins/monobook/IE60Fixes.css?195" type="text/css" media="screen" /><![endif]-->
		<!--[if IE 7]><link rel="stylesheet" href="/skins/monobook/IE70Fixes.css?195" type="text/css" media="screen" /><![endif]-->
		<link rel="stylesheet" href="/index.php?title=MediaWiki:Common.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="/index.php?title=MediaWiki:Print.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" media="print" />
		<link rel="stylesheet" href="/index.php?title=MediaWiki:Monobook.css&amp;usemsgcache=yes&amp;ctype=text%2Fcss&amp;smaxage=18000&amp;action=raw&amp;maxage=18000" type="text/css" />
		<link rel="stylesheet" href="/index.php?title=-&amp;action=raw&amp;maxage=18000&amp;smaxage=0&amp;ts=20120630142713&amp;gen=css" type="text/css" />
		<!--[if lt IE 7]><script type="text/javascript" src="/skins/common/IEFixes.js?195"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script type= "text/javascript">/*<![CDATA[*/
		var skin = "monobook";
		var stylepath = "/skins";
		var wgArticlePath = "/index.php/$1";
		var wgScriptPath = "";
		var wgScript = "/index.php";
		var wgVariantArticlePath = false;
		var wgActionPaths = {};
		var wgServer = "http://wiki.sphere.torfo.org";
		var wgCanonicalNamespace = "";
		var wgCanonicalSpecialPageName = false;
		var wgNamespaceNumber = 0;
		var wgPageName = "Chapter_4";
		var wgTitle = "Chapter 4";
		var wgAction = "view";
		var wgArticleId = "5";
		var wgIsArticle = true;
		var wgUserName = "Ben";
		var wgUserGroups = ["*", "user", "autoconfirmed"];
		var wgUserLanguage = "en";
		var wgContentLanguage = "en";
		var wgBreakFrames = false;
		var wgCurRevisionId = "682";
		var wgVersion = "1.14.0";
		var wgEnableAPI = true;
		var wgEnableWriteAPI = true;
		var wgSeparatorTransformTable = ["", ""];
		var wgDigitTransformTable = ["", ""];
		var wgRestrictionEdit = [];
		var wgRestrictionMove = [];
		var wgAjaxWatch = {"watchMsg": "Watch", "unwatchMsg": "Unwatch", "watchingMsg": "Watching...", "unwatchingMsg": "Unwatching..."};
		/*]]>*/</script>

		<script type="text/javascript" src="/skins/common/wikibits.js?195"><!-- wikibits js --></script>
		<!-- Head Scripts -->
		<script type="text/javascript" src="/skins/common/ajax.js?195"></script>
		<script type="text/javascript" src="/skins/common/ajaxwatch.js?195"></script>
		<script type="text/javascript" src="/index.php?title=-&amp;action=raw&amp;smaxage=0&amp;gen=js&amp;useskin=monobook"><!-- site js --></script>
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-Chapter_4 skin-monobook">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
				<h1 id="firstHeading" class="firstHeading">Chapter 4</h1>
		<div id="bodyContent">
			<h3 id="siteSub">From SphereWiki</h3>
			<div id="contentSub"></div>
									<div id="jump-to-nav">Jump to: <a href="#column-one">navigation</a>, <a href="#searchInput">search</a></div>			<!-- start content -->
			<div style="margin: 0px; padding: 2px 2px 0px 2px; border: none; border-collapse:collapse; clear:both;">
<span style="float:right; font-weight:normal; font-size: x-small;"><a href="/index.php/Wiki_Translation" title="Wiki Translation">Help</a></span><div style="background-color:#e9e9e9; border-style:solid; border-width:1px; border-color:#aaa; padding: 0pt 4pt 8pt 4pt; font-size: 95%; text-align:center;"><b>Available languages</b></div>
<div style="border: 1px solid #aaa; background-color: #f9f9f9; border-collapse:collapse; font-size: 95%; padding: 2pt 4pt 2pt 4pt; margin: 0px;">          • <span lang="en"><strong class="selflink">English</strong></span>                                         
</div>
</div>
<div class="NavFrame" style="border:none; clear:none; margin: 0px; padding-top: 0px;">
<div class="NavHead" style="background-color:#e9e9e9; border-style:solid; border-width:1px; border-color:#aaa; margin: 0px; padding: 0pt 4pt 8pt 4pt; font-size: 95%;"><b>Missing languages</b></div>
<div class="NavContent" style="border: 1px solid #aaa; background-color: #f9f9f9; border-collapse:collapse; font-size: 95%; padding: 2pt 4pt 2pt 4pt;">        • <span lang="de"><a href="/index.php?title=De:Chapter_4&amp;action=edit&amp;redlink=1" class="new" title="De:Chapter 4 (page does not exist)">Deutsch</a></span>    • <span lang="es"><a href="/index.php?title=Es:Chapter_4&amp;action=edit&amp;redlink=1" class="new" title="Es:Chapter 4 (page does not exist)">Español</a></span>    • <span lang="fr"><a href="/index.php?title=Fr:Chapter_4&amp;action=edit&amp;redlink=1" class="new" title="Fr:Chapter 4 (page does not exist)">Français</a></span>           • <span lang="ja"><a href="/index.php?title=Ja:Chapter_4&amp;action=edit&amp;redlink=1" class="new" title="Ja:Chapter 4 (page does not exist)">日本語</a></span>                  • <span lang="tr"><a href="/index.php?title=Tr:Chapter_4&amp;action=edit&amp;redlink=1" class="new" title="Tr:Chapter 4 (page does not exist)">Türkçe</a></span>     
</div>
</div><div class="NavFrame" style="border:none;display:none;"></div>
<p><br />
</p>
<table id="toc" class="toc" summary="Contents"><tr><td><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1"><a href="#Introduction_to_Objects"><span class="tocnumber">1</span> <span class="toctext">Introduction to Objects</span></a></li>
<li class="toclevel-1"><a href="#Making_Decisions"><span class="tocnumber">2</span> <span class="toctext">Making Decisions</span></a></li>
<li class="toclevel-1"><a href="#.5BSPEECH.5D_for_Dummies"><span class="tocnumber">3</span> <span class="toctext">[SPEECH] for Dummies</span></a></li>
<li class="toclevel-1"><a href="#The_Difference_Between_.3D_And_.3D.3D.3F"><span class="tocnumber">4</span> <span class="toctext">The Difference Between = And ==?</span></a></li>
</ul>
</td></tr></table><script type="text/javascript"> if (window.showTocToggle) { var tocShowText = "show"; var tocHideText = "hide"; showTocToggle(); } </script>
<a name="Introduction_to_Objects" id="Introduction_to_Objects"></a><h2><span class="editsection">[<a href="/index.php?title=Chapter_4&amp;action=edit&amp;section=1" title="Edit section: Introduction to Objects">edit</a>]</span> <span class="mw-headline">Introduction to Objects</span></h2>
<p>Your first glimpse of real scripting! 
</p><p><br />
First and foremost, you MUST understand the object structure of the SPHERE system. Now, because SPHERE interacts with something visible, most of these objects are relatively easy to understand. But first, you must understand this simple fact about object-oriented programming (a term I'm sure all you programmers havel come to know and fear): 
</p><p><br />
<b>OBJECT-ORIENTED SCRIPTING IS CENTERED AROUND OBJECTS.</b>
</p><p><br />
Duh. 
</p><p><br />
Actually, it isn't as "Duh" as you may think. Here is a list of the objects available to you in a SPHERE script: 
</p><p><br />
</p>
<table border="1">
<tr>
<td> <b>Who</b>
</td><td> <b>What</b>
</td></tr>
<tr>
<td>  SRC
</td><td>  The <b>"source"</b> of an event. If an item is damaged, the SRC is whatever damaged it. If a player is hit, the SRC is whoever hit the player. If an item is double-clicked, the SRC is the player who double-clicked it. The ONLY event that does not have a SRC, as we shall see later, is @Timer, for good reasons. Note that usually on functions the SRC isn't always the one who called the functions, but the default object (I or just an empty thing, eg: &lt;I.NAME&gt; or &lt;NAME&gt; are the same thing.
</td></tr>
<tr>
<td>  ACT
</td><td>  The last object acted upon by the referenced character, for example on that char trigger @ItemDclick, ACT is the item the player double-clicked.
</td></tr>
<tr>
<td>  TARG
</td><td>  The object targetted by the character.
</td></tr>
<tr>
<td>  CONT
</td><td>  The container of the object.
</td></tr>
<tr>
<td>  TOPOBJ
</td><td>  If an object is buried in several containers within containers, this is always the top-level container before you get to the world. If an item is buried in a player's backpack, TOPOBJ is the player.
</td></tr>
<tr>
<td>  ACCOUNT
</td><td>  The account of a player, obviously.
</td></tr>
<tr>
<td>  REGION
</td><td>  The current region/area a player is in.
</td></tr>
<tr>
<td>  SECTOR
</td><td>  The world is divided into 64 by 64 tile sectors (by default but you can change it by setting the MAPx settings (look at sphere.ini section for this)). This is the player's current sector.
</td></tr>
<tr>
<td>  SERV
</td><td>  used to call server commands, like serv.save, serv.allclients, etc.
<p><b>Object references from SERV</b>
</p>
<table border="1">
<tr>
<td>  LASTNEWITEM
</td><td>  The last item created from NEWITEM/NEWDUPE functions.
</td></tr>
<tr>
<td>  LASTNEWCHAR
</td><td>  The last character created by NEWNPC/NEWDUPE functions.
</td></tr></table>
</td></tr>
<tr>
<td>  LINK
</td><td>  The object referred to in the LINK property of an <b>item</b>.
</td></tr>
<tr>
<td>  UID.x
</td><td>  The object with UID equal to X.
</td></tr>
<tr>
<td>  FINDLAYER.X
</td><td>  The object in layer X.
</td></tr>
<tr>
<td>  FINDCONT.X
</td><td>  The xth object in the container referenced.
</td></tr>
<tr>
<td>  FINDID.x
</td><td>  The first object with ID of x in the container.
</td></tr>
<tr>
<td>  FINDTYPE.x
</td><td>  The first object with TYPE of X in the container.
</td></tr>
<tr>
<td>  NEW
</td><td>  The newer object created from NEWITEM/NEWNPC/NEWDUPE functions.
</td></tr>
<tr>
<td>  OBJ
</td><td>  An empty object variable, which you need to set to use, eg:
<p><tt><font color="darkblue">OBJ = &lt;FINDLAYER.<b>layer_bankbox</b>&gt;<br />
OBJ.SAY HEHE<br /></font></tt>
</p><p>will make I's bank box say hehe.<br />
<b>NOTE</b>: OBJ is a global variable so it can possibly interfere with other scripts.<br />
It's best to set it back to nothing when not in use in a certain script.
</p>
</td></tr>
<tr>
<td>  REFx
</td><td>  This works in the same way as OBJ except the reference is local and will not interfere with other scripts. 'x' is a number between 1 and 65535, allowing you to reference as many objects as you need simultaneously (e.g. REF1 = &lt;FINDLAYER.layer_bankbox&gt;).
</td></tr>
<tr>
<td>  FILE
</td><td>  Call the file commands on the current FILE object.
</td></tr>
<tr>
<td>  DB
</td><td>  See <a href="/index.php?title=MySQL&amp;action=edit&amp;redlink=1" class="new" title="MySQL (page does not exist)">MySQL</a>
</td></tr>
<tr>
<td>  PARTY.MEMBER.x
</td><td>  The xth party member of the referenced party.
</td></tr>
<tr>
<td>  GUILD.MEMBER.x
</td><td>  The xth guild member of the referenced guild.
</td></tr></table>
<p><br />
As you can see, we're rather limited in what we can do! Actually, not really. With the current scripting system, you can do almost anything imaginable with SPHERE. It might run slow or be laggy, but it can be done. Those last five events (the ones with the x in them) are complex and I don't expect you to know how to use them yet. 
</p><p><br />
Now that we know the objects, we need to know how to access the properties of those objects, and above all, do things to those objects. We use the dot operator (.) to access properties of objects. For example: 
</p><p><tt><font color="darkblue">SRC.STR<br />
ACT.MOREP<br />
SRC.ACT.MOREP<br />
SRC.TARG.HITS<br />
SRC.DAMAGE {1 5} 01 &lt;ACT&gt;<br />
SERV.NEWITEM i_gold<br />
NEW.AMOUNT 10000<br />
SRC.TARG.KILL<br />
CONT.KILL<br />
FINDLAYER.layer_backpack.FINDID.i_gold.AMOUNT<br /></font></tt>
</p><p><br />
I don't expect you to understand what all of these things do yet, but you will by the end of this chapter.
</p><p><br />
<b>Some notes</b>: You must also understand that OBJECTS aren't ITEMS, when someone say OBJECT they probably mean a character/item/some of those in the table. The objects can also be called REFERENCE, for example, ACT.STR 100 the reference is ACT.
</p><p><br />
Here is the next principle of SPHERE scripting:
</p><p><br />
<b>ALL ACTIONS ARE TRIGGERED BY EVENTS OR FUNCTIONS, WHICH DEFINE THE OBJECTS</b>
</p><p><br />
Nothing happens in a SPHERE script that just sits there. A player, or something else in the game, must do something to an item or a character for a script to execute. For example, being hit executes the @GetHit script on the person being hit, and @Hit on the hitter. Stepping on an item executes the @Step script on the item and the @ItemStep script on the player. When an item is double-clicked, @DClick is executed on the item and @ItemDClick is executed on the player. 
</p><p><br />
If the player is the one who double-clicks the ITEM, he becomes SRC. If he targets an item, in the @Targon_Item script, the player is SRC, and the item he targeted is SRC.TARG. 
</p><p><br />
We refer to an event like this: 
</p><p><br />
<tt><font color="darkblue">ON=@DClick </font></tt>
</p><p><br />
Following that line would be everything that we want to happen when the player clicks the item. 
</p><p><br />
We'll see examples in the next section of the use of both events and objects.
</p><p><br />
</p>
<a name="Making_Decisions" id="Making_Decisions"></a><h2><span class="editsection">[<a href="/index.php?title=Chapter_4&amp;action=edit&amp;section=2" title="Edit section: Making Decisions">edit</a>]</span> <span class="mw-headline">Making Decisions</span></h2>
<p>It was an amazing day when someone showed this script to me. This was actually the script that tested the "new" scripting system in version .37. SPHERE wasn't even SPHERE then. It was called "Grayworld" and was on menasoft.com. Actually, I believe it was in the Admin FAQ that they used to have on the website. Here it is, updated to 56b format:
</p><p><br />
<tt><font color="darkblue">[TYPEDEF T_VEND_MACHINE]<br />
// Some other trigger.<br />
// Vending machine.<br />
<br />
ON=@DCLICK
</p>
<dl><dd>IF (&lt;SRC.RESTEST 10 i_gold&gt;)<br />
<dl><dd>SERV.NEWITEM={ i_HAM 1 i_fruit_apple 1 i_bread_loaf 1 i_bacon_slice 1 i_RIBS_COOKED 1 i_SAUSAGES 1}<br />
</dd><dd>SRC.BOUNCE &lt;NEW.UID&gt; // put it in your pack.<br />
</dd><dd>SRC.CONSUME 10 i_gold<br />
</dd><dd>SRC.MESSAGE That will be 10 Gold Thank Thee.<br />
</dd><dd>SOUND 0F7<br />
</dd></dl>
</dd><dd>ELSE<br />
<dl><dd>MESSAGE You lack 10 Gold to pay.<br />
</dd></dl>
</dd><dd>ENDIF<br />
</dd><dd>RETURN 1<br /></font></tt>
</dd></dl>
<p><br />
Put this script into one of your files and resync your server. I like to use spheretrig.scp for test triggers like this. Now, in the game, type <font color="darkred">.set type t_vend_machine</font> and target any item (like a door). Then double-click it and watch what happens. If you get the "not enough gold" message, <font color="red">.add</font> yourself some i_gold, and try again.
</p><p><br />
See the result of this simple little script? It's got a lot that we've dicussed, and even more that we haven't. First, you may notice the use of this strange IF construction. You will use this again and again, so pay attention! The IF structure looks like this:
</p><p><br />
<tt><font color="darkblue">IF (1 or 0)<br />
// Execute these lines if 1<br />
ELIF (1 or 0)<br />
// Execute these lines if the first wasn't 1, but this one is<br />
// You can have as many ELIFs as you need<br />
ELSE<br />
// Execute if none of the above are 1<br />
ENDIF<br /></font></tt>
</p><p><br />
Always, always, always, always pair your IF with an ENDIF. It doesn't matter what's in the middle. You can have eight hundred ELIFs and an ELSE. But ALWAYS be sure your IF is paired somewhere with an ENDIF. Actually those are the only two required parts of this construction. ELSE and ELIF are completely optional, and you should only use them if they are absolutely needed.
</p><p><br />
So what is this "1 or 0" thing? How does it help me in my scripting if I'm just typing a 1 or a 0 in there? Actually, you will NEVER type a 1 or a 0 in there, and this is a perfect time to introduce the equivalence test operators. Here they are:
</p><p><br />
</p>
<table>
<tr>
<td> <b>==</b> </td><td> <b>equal to</b>
</td></tr>
<tr>
<td> <b>!=</b> </td><td> <b>not equal to</b>
</td></tr>
<tr>
<td> <b>&gt; </b> </td><td> <b>greater than</b>
</td></tr>
<tr>
<td> <b>&lt; </b> </td><td> <b>less than</b>
</td></tr>
<tr>
<td> <b>&lt;=</b> </td><td> <b>less than or equal to</b>
</td></tr>
<tr>
<td> <b>&gt;=</b> </td><td> <b>greater than or equal to </b>
</td></tr></table><br />
<p><b>1 = true</b><br />
<b>0 = false</b><br />
</p><p><br />
I've put this table in bold since it's so incredibly important. And here is another SPHERE principle: 
</p><p><br />
<b>Do not use == and = interchangably in an IF statement. SPHERE actually allows this, but you will get confused and use == where you mean =, and vice versa.</b>
</p><p><br />
Here is an example of using a equivalence operator in an IF statement: 
</p><p><br />
<tt><font color="darkblue">IF (&lt;SRC.STR&gt; == 75)</font></tt>
</p><p><br />
Read this "If src.str is equal to 75". Want to know something interesting? Internally, if SRC.STR is in fact equal to 75, SPHERE will replace the ENTIRE part inside the parentheses with a 1. If it is not equal to 75, SPHERE will replace that part with a 0. That's where your 1 and 0 comes from. 
</p><p><br />
Now you may be wondering, what the &lt; &gt; brackets around &lt;SRC.STR&gt; are doing there. Actually, this is one of the most elusive concepts in SPHERE scripting. The &lt; &gt; brackets mean "Replace whatever is inside with the actual value of that thing." This is done before any testing is executed. Say SRC.STR has been set to 71. Here are the steps SPHERE takes in simplifying this IF statement: 
</p><p><br />
<tt><font color="darkred">1. IF (&lt;SRC.STR&gt; == 75)</font><br />
<br />
<font color="darkred">2. IF (71 == 75)</font><br />
<br />
<font color="darkred">3. IF (0)</font><br /></tt>
</p><p>Notice above in the example script that we have this statement:
</p><p><br />
<tt><font color="darkred">&lt;SRC.RESTEST 10 i_gold&gt;</font></tt>
</p><p><br />
"What the heck is <font color="darkred">RESTEST</font>?" <font color="darkred">RESTEST</font> is what we call a function. It takes parameters (in this case an amount and an item ID) and returns a value. SPHERE replaces the entire function statement &lt;SRC.RESTEST 10 i_gold&gt; with that value. RESTEST checks to see if the player has an amount of the item specified greater than the amount specified: 
</p><p><br />
"Does the player have an amount of i_gold equal to or greater than 10?" is what the function asks. Internally SPHERE says "Yes" and replaces it with a 1, or "No" and replaces it with a 0. 
</p><p><br />
Say the player had 9 gold in his backpack. Here is the simplification of the IF statement: 
</p><p><br />
<tt><font color="darkred">1. IF (&lt;SRC.RESTEST 10 i_gold&gt;)<br />
<br />
2. IF (0)<br /></font></tt>
</p><p><br />
We'll see in later chapters how to define our own functions, give them parameters and have them return a value! 
</p><p><br />
I hope you have a general understanding of the <font color="darkred">IF</font> statement now. Here is a more complex example for you to analyze: 
</p><p><br />
<tt><font color="darkblue">IF (&lt;SRC.STR&gt; &gt; 60)<br />
</p>
<dl><dd>SRC.SYSMESSAGE Your strength is greater than 60.<br />
</dd></dl>
<p>ELIF (&lt;SRC.STR&gt; &gt; 40)<br />
</p>
<dl><dd>SRC.SYSMESSAGE Your strength is greater than 40, but less than 60.<br />
</dd></dl>
<p>ELIF (&lt;SRC.STR&gt; &gt; 20)<br />
</p>
<dl><dd>SRC.SYSMESSAGE You are a weakling with between 20 and 40 strength.<br />
</dd></dl>
<p>ELSE<br />
</p>
<dl><dd>SRC.SYSMESSAGE Start lifting weights because your strength is less than 20!<br />
</dd></dl>
<p>ENDIF<br /></font></tt>
</p><p><br />
What does this do? Well first, SPHERE looks at the IF statement, and says "Is the value of SRC.STR greater than 60?" If the answer is no, SPHERE replaces that with a 0, and jumps down to the first ELIF. "Is the value of SRC.STR greater than 40?" If not, it jumps down to the next one. "Is the value of SRC.STR greater than 20?" If not, it looks for further ELIFs. Unable to find them, it jumps to the ELSE statement, since nothing above was true. 
</p><p><br />
SYSMESSAGE prints out a message to the corner of the screen of the referenced object. In this case, that's SRC. Earlier, you saw an example involving the MESSAGE function. It prints the message above the object referenced. If the object is inside of a closer container, it does a SYSMESSAGE to the topmost container object. This means that if an item in a backpack is given a MESSAGE command, and the backpack is not opened, the player will see the message in the corner of his screen. 
</p><p><br />
<tt><font color="darkred"><b>SYSMESSAGE</b> [text]<br />
<b>MESSAGE</b> [text]<br />
<b>RESTEST</b> [amount] [item]<br />
<b>NEWITEM</b> [item]<br />
<b>BOUNCE</b> // Put an item into the character's backpack<br /></font></tt>
</p><p><br />
Your first five functions. Congratuations. Actually, you saw another one in an earlier script! Remember what it is?
</p><p><br />
<tt><font color="darkred"><b>SAY</b> [text]<br /></font></tt>
</p><p><br />
This, of course, causes the object to SAY (so everyone can hear it) the text given. With MESSAGE and SYSMESSAGE, the text is private to a single client. MESSAGE text is only visible to the SRC. (In other words, LINK.MESSAGE or SRC.TARG.MESSAGE will show a message over LINK or SRC.TARG that only SRC can see!) 
</p><p><br />
So finally, what is this weird <font color="darkred">RETURN 1</font> at the end of the script? 
</p><p><br />
RETURN is used in a variety of ways. In the case of an event script, if you RETURN 1, it prevents the default action from happening. For example, if you put this on an item in the game and double-click it, it doesn't actually try to use the item too. It just executes the double-click script. (To a player it would look like he was using the item, but we know better.) If you change it to RETURN 0, it would try to use the item too, realize it had no idea what to do with this item, and say "You are not sure how to use this item" or something like that. Either way, the script ends as soon as it sees a RETURN statement. The distinction between RETURN 1 and RETURN 0 is even more clear in character events, and I shall make an effort to point that out at the time.
</p><p><br />
</p>
<a name=".5BSPEECH.5D_for_Dummies" id=".5BSPEECH.5D_for_Dummies"></a><h2><span class="editsection">[<a href="/index.php?title=Chapter_4&amp;action=edit&amp;section=3" title="Edit section: [SPEECH] for Dummies">edit</a>]</span> <span class="mw-headline">[SPEECH] for Dummies</span></h2>
<p>I say "Hello" you say "Goodbye", or "Cheese", or "You are a bad scripter" 
</p><p><br />
Well, it's time to introduce you to your newest concept in SPHERE scripting:
</p><p><br />
NPC SPEECH is an event.
</p><p><br />
A long time ago there was supposed to be a @Hear trigger, and we waited and waited and waited, and it was going to be the next big thing in TUS (SPHERE's name before version .50), but nothing ever came of it. Then came SPHERE with all these new scripting revelations, and we said "Hey! We don't even need @Hear! Speech works just like any other event!
</p><p><br />
For example:
</p><p><br />
<tt><font color="darkblue">[SPEECH spk_human_test]<br />
ON=*hello*<br />
</p>
<dl><dd>SAY @55 Cheese!<br /></font></tt>
</dd></dl>
<p><br />
You should recognize that from a previous chapter when we created this script and set it on an NPC. But what if we want that NPC to do more than say "Cheese!" in a yellow colored font. What if we want him run away as fast as he possibly can, or drop his gold on the ground and faint?
</p><p><br />
We could easily do this:
</p><p><br />
<tt><font color="darkblue">[SPEECH spk_human_test]<br />
ON=*hello*<br />
</p>
<dl><dd>IF (&lt;SRC.KARMA&gt; &lt; &lt;SERV.PLAYERNEUTRAL&gt;) // Are they less than good?<br />
<dl><dd>SAY You are evil! Get away from me!<br />
</dd><dd>FLEE // Causes an NPC to run away from SRC (this can have an argument (the one to flee from))<br />
</dd></dl>
</dd><dd>ELSE<br />
<dl><dd>SAY Cheese!<br />
</dd><dd>BOW //Makes him bow to src (this can have an argument (the one to be bowed to uid))<br />
</dd></dl>
</dd><dd>ENDIF<br />
</dd><dd>RETURN 1<br /></font></tt>
</dd></dl>
<p><br />
If you don't RETURN 1, the processing will pass through to the default handler, which will make the NPC say something like "Huh? I don't understand thee!"
</p><p><br />
In an NPC speech event, <font color="darkred">SRC</font> is the player who triggered the event, the speaker who said "hello" in this case. The default object is the NPC with the event on him, as you can see from the script above. That is why SAY works without an object reference.
</p><p><br />
You can have ANYTHING in a speech script that you can have in a normal script. Just remember, there are no items involved. No MORE, no MORE2, no MOREP. But I'll tell you in a little bit how to get as many variables as you want on both NPCs and humans.
</p><p><br />
This section doesn't need to be any longer, does it? You already know how to write an event, and you already know some basic statements, like <font color="darkred">IF</font>. That should provide some very robust NPC speaking on your shard!
</p><p><br />
</p>
<a name="The_Difference_Between_.3D_And_.3D.3D.3F" id="The_Difference_Between_.3D_And_.3D.3D.3F"></a><h2><span class="editsection">[<a href="/index.php?title=Chapter_4&amp;action=edit&amp;section=4" title="Edit section: The Difference Between = And ==?">edit</a>]</span> <span class="mw-headline">The Difference Between = And ==?</span></h2>
<p>Actually, in SPHERE the difference is nothing, as Belgar has made clear to me since I set up the table of contents for this section a few weeks ago.  However, I'm going to do this section anyway, because you're learning my style of scripting, and you're going to do it my way or else. &nbsp;:)
</p><p><br />
In most programming languages, = is called the "assignment operator".  == is called the "equals sign".
</p><p><br />
Here are my style guidelines, for better readability of your scripts, and so on.  (If we can't read your scripts, we can't help you with them.)
</p><p><br />
</p>
<ol><li> == should only be used in test statements, like an IF<br /> <tt>IF (&lt;SRC.STR&gt; <b>==</b> 75)</tt><br />
</li><li> = should be used for assignments, like setting a variable to a value<br /> <tt>MORE <b>=</b> 3<br /> MOREP <b>=</b> 45 65 12 4</tt>
</li></ol>
<p><br />
And that's about it.  I'm pretty lenient huh?
</p><p><br />
As a comparison, my Java class at school has style guidelines in a set of pages the size of this entire tutorial.
</p>
<!-- 
NewPP limit report
Preprocessor node count: 388/1000000
Post-expand include size: 3359/2097152 bytes
Template argument size: 593/2097152 bytes
Expensive parser function count: 8/100
-->

<!-- Saved in parser cache with key d00b020c:pcache:idhash:5-0!1!0!!en!2 and timestamp 20120714134455 -->
<div class="printfooter">
Retrieved from "<a href="http://wiki.sphere.torfo.org/index.php/Chapter_4">http://wiki.sphere.torfo.org/index.php/Chapter_4</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="/index.php/Special:Categories" title="Special:Categories">Category</a>:&#32;<span dir='ltr'><a href="/index.php/Category:Tutorials" title="Category:Tutorials">Tutorials</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">
	<div id="p-cactions" class="portlet">
		<h5>Views</h5>
		<div class="pBody">
			<ul>
	
				 <li id="ca-nstab-main" class="selected"><a href="/index.php/Chapter_4" title="View the content page [c]" accesskey="c">Page</a></li>
				 <li id="ca-talk" class="new"><a href="/index.php?title=Talk:Chapter_4&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
				 <li id="ca-edit"><a href="/index.php?title=Chapter_4&amp;action=edit" title="You can edit this page.&#10;Please use the preview button before saving [e]" accesskey="e">Edit</a></li>
				 <li id="ca-history"><a href="/index.php?title=Chapter_4&amp;action=history" title="Past versions of this page [h]" accesskey="h">History</a></li>
				 <li id="ca-move"><a href="/index.php/Special:MovePage/Chapter_4" title="Move this page [m]" accesskey="m">Move</a></li>
				 <li id="ca-watch"><a href="/index.php?title=Chapter_4&amp;action=watch" title="Add this page to your watchlist [w]" accesskey="w">Watch</a></li>			</ul>
		</div>
	</div>
	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-userpage"><a href="/index.php/User:Ben" title="Your user page [.]" accesskey="." class="new">Ben</a></li>
				<li id="pt-mytalk"><a href="/index.php/User_talk:Ben" title="Your talk page [n]" accesskey="n" class="new">My talk</a></li>
				<li id="pt-preferences"><a href="/index.php/Special:Preferences" title="Your preferences">My preferences</a></li>
				<li id="pt-watchlist"><a href="/index.php/Special:Watchlist" title="The list of pages you are monitoring for changes [l]" accesskey="l">My watchlist</a></li>
				<li id="pt-mycontris"><a href="/index.php/Special:Contributions/Ben" title="List of your contributions [y]" accesskey="y">My contributions</a></li>
				<li id="pt-logout"><a href="/index.php?title=Special:UserLogout&amp;returnto=Chapter_4" title="Log out">Log out</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(http://wiki.sphere.torfo.org/images/SphereWiki.png);" href="/index.php/Main_Page" title="Visit the main page [z]" accesskey="z"></a>
	</div>
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="/index.php/Special:Search" id="searchform"><div>
				<input id="searchInput" name="search" type="text" title="Search SphereWiki [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="/index.php/Main_Page">Main Page</a></li>
				<li id="n-recentchanges"><a href="/index.php/Special:RecentChanges" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="/index.php/Special:Random" title="Load a random page [x]" accesskey="x">Random page</a></li>
				<li id="n-SphereServer-Forum"><a href="http://www.sphereserver.net">SphereServer Forum</a></li>
				<li id="n-help"><a href="/index.php/Help:Contents" title="The place to find out">Help</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-Setting_Up_Sphere'>
		<h5>Setting Up Sphere</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Where-To-Get-Sphere"><a href="/index.php/Where_to_get_Sphere">Where To Get Sphere</a></li>
				<li id="n-Installing-Sphere"><a href="/index.php/Installing_Sphere">Installing Sphere</a></li>
				<li id="n-Configuring-Sphere.ini"><a href="/index.php/Configuring_Sphere.ini">Configuring Sphere.ini</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-Reference_Compendium'>
		<h5>Reference Compendium</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Definitions"><a href="/index.php/Category:Definitions">Definitions</a></li>
				<li id="n-Objects"><a href="/index.php/Category:Objects">Objects</a></li>
				<li id="n-Scripts"><a href="/index.php/Category:Scripts">Scripts</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-Tutorial_Chapters'>
		<h5>Tutorial Chapters</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Chapter-One"><a href="/index.php/Chapter_1">Chapter One</a></li>
				<li id="n-Chapter-Two"><a href="/index.php/Chapter_2">Chapter Two</a></li>
				<li id="n-Chapter-Three"><a href="/index.php/Chapter_3">Chapter Three</a></li>
				<li id="n-Chapter-Four"><a href="/index.php/Chapter_4">Chapter Four</a></li>
				<li id="n-Chapter-Five"><a href="/index.php/Chapter_5">Chapter Five</a></li>
				<li id="n-Chapter-Six"><a href="/index.php/Chapter_6">Chapter Six</a></li>
				<li id="n-Chapter-Seven"><a href="/index.php/Chapter_7">Chapter Seven</a></li>
				<li id="n-Chapter-Eight"><a href="/index.php/Chapter_8">Chapter Eight</a></li>
				<li id="n-Chapter-Nine"><a href="/index.php/Chapter_9">Chapter Nine</a></li>
				<li id="n-Chapter-Ten"><a href="/index.php/Chapter_10">Chapter Ten</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="/index.php/Special:WhatLinksHere/Chapter_4" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="/index.php/Special:RecentChangesLinked/Chapter_4" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="/index.php/Special:SpecialPages" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="/index.php?title=Chapter_4&amp;printable=yes" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="/index.php?title=Chapter_4&amp;oldid=682" title="Permanent link to this version of the page">Permanent link</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="/skins/common/images/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" /></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 26 November 2010, at 16:16.</li>
					<li id="viewcount">This page has been accessed 6,802 times.</li>
					<li id="privacy"><a href="/index.php/SphereWiki:Privacy_policy" title="SphereWiki:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="/index.php/SphereWiki:About" title="SphereWiki:About">About SphereWiki</a></li>
					<li id="disclaimer"><a href="/index.php/SphereWiki:General_disclaimer" title="SphereWiki:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

		<script type="text/javascript">if (window.runOnloadHook) runOnloadHook();</script>
<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sphere.torfo.org/piwik/" : "http://sphere.torfo.org/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 4);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script>
<!-- End Piwik Tag -->
<!-- Served in 0.502 secs. --></body></html>
